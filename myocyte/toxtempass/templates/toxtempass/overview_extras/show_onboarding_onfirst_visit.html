<script>
    document.addEventListener('DOMContentLoaded', () => {
    const showOnboarding = {{ show_onboarding|yesno:"true,false" }};
    if (showOnboarding) {
        // Create toast container if it doesn't exist
        let toastContainer = document.getElementById('welcome-toast-container');
        if (!toastContainer) {
            toastContainer = document.createElement('div');
            toastContainer.id = 'welcome-toast-container';
            toastContainer.style.position = 'fixed';
            toastContainer.style.top = '50%';
            toastContainer.style.left = '50%';
            toastContainer.style.transform = 'translate(-50%, -50%)';
            toastContainer.style.zIndex = '1080'; // above most elements
            document.body.appendChild(toastContainer);
        }

        // Create toast element
        const toast = document.createElement('div');
        toast.className = 'toast show';
        toast.style.minWidth = '300px';
        toast.style.maxWidth = '90vw';
        toast.style.backgroundColor = '#343a40';  // Bootstrap dark bg
        toast.style.color = 'white';
        toast.style.padding = '1rem';
        toast.style.borderRadius = '0.375rem';
        toast.style.boxShadow = '0 0.125rem 0.25rem rgba(0, 0, 0, 0.075)';
        toast.style.fontFamily = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"';
        toast.style.textAlign = 'center';

        // Content of the toast
        toast.innerHTML = `
            <div style="font-weight:bold; font-size:1.25rem; margin-bottom:0.5rem;">Welcome to ToxTempAssistant</div>
            <div style="margin-bottom:0.5rem;">
                This tool is designed to help streamline your regulatory documentation process quickly and efficiently.
            </div>
            <div style="font-style:italic; margin-bottom:0.75rem;">â€” J. Houweling, RIVM</div>
            <div>
                Let's start with a brief onboarding to help you get familiar with the interface.
            </div>
            <button id="welcome-toast-close" style="margin-top:1rem; background:#007bff; border:none; color:white; padding:0.375rem 0.75rem; border-radius:0.25rem; cursor:pointer;">
                Start Onboarding
            </button>
        `;

        // Append toast to container
        toastContainer.appendChild(toast);

        // Add close/start onboarding button behavior
        document.getElementById('welcome-toast-close').addEventListener('click', () => {
            toast.classList.remove('show');
            toast.classList.add('hide');
            setTimeout(() => {
                toastContainer.removeChild(toast);
                if (typeof window.startOnboarding === "function") {
                    window.startOnboarding();
                } else {
                    console.warn("Onboarding script not loaded.");
                }
            }, 300); // match fade out timing if desired
        });
    }
    });
</script>
